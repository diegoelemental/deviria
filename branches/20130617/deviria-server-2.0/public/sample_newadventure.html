<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Deviria Adventures</title>
		<meta name="description" content="">
		<meta name="author" content="">

		<!-- HTML5 shim, for IE6-8 support of HTML elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

		<link href="/css/deviria-facebook.css" rel="stylesheet">
		<link href="/css/jquery-ui-1.10.3.custom.css" rel="stylesheet">
		<style type="text/css">
		.jcarousel-container-vertical {
			width: 500px;
			height: 170px;
			background: #ffffff;
			border: 1px solid #fff;
		}

		.jcarousel-clip-vertical {
			top: 15px;
			width: 490px;
			height: 140px;
			margin: 0 5px;
			z-index: 20;
			overflow: hidden;
		}

		#heroList li,
		.jcarousel-item-vertical,
		.jcarousel-item-placeholder-vertical {
			width: 470px;
			height: auto;
			margin: 5px 0;
		}

		.jcarousel-item h3,
		.jcarousel-item p,
		.jcarousel-item pre {
			margin: 0;
			font-size: 90%;
		}

		.jcarousel-item pre {
			margin: 5px 0;
			padding: 5px;
		}

		.jcarousel-next-vertical {
			position: absolute;
			bottom: 0;
			left: 0;
			width: 500px;
			height: 14px;
			cursor: pointer;
			border-top: 1px solid #fff;
			background: #627AAD url(/images/arrow-down.gif) no-repeat center;
		}

		.jcarousel-next-disabled-vertical {
			cursor: default;
			opacity: .5;
			-moz-opacity: .5;
			filter: alpha(opacity=50);
		}

		.jcarousel-prev-vertical {
			position: absolute;
			top: 0;
			left: 0;
			width: 500px;
			height: 14px;
			cursor: pointer;
			border-bottom: 1px solid #fff;
			background: #627AAD url(/images/arrow-up.gif) no-repeat center;
		}

		.jcarousel-prev-disabled-vertical {
			cursor: default;
			opacity: .5;
			-moz-opacity: .5;
			filter: alpha(opacity=50);
		}

		.loading {
			background: transparent url(/images/loading-small.gif) 50% 50% no-repeat;
		}		
		</style>
	</head>
	<body>
		<div id="fb-root"></div>
		<script>
			(function(d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) return;
			js = d.createElement(s); js.id = id;
			js.src = "//connect.facebook.net/pt_BR/all.js#xfbml=1&appId=480845948672620";
			fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));
		</script>
		<div align="center" style="width: 100%;">
			<img src="/images/banner.png"/>
		</div>
		<h2>Iniciar uma aventura</h2>
		<div class="fb-like" data-href="https://apps.facebook.com/deviria-tests/" data-send="true" data-width="450" data-show-faces="true"></div>
		<table border="0" cellpadding="0" cellspacing="5" width="100%">
			<tr>
				<td><div class="fbgreybox">Instruções</div></td>
				<td width="510"><div class="fbgreybox">Participantes</div></td>
			</tr>
			<tr>
				<td valign="middle" class="evenline">
                    Sentindo-se aventureiro?
                    <p/>
                    Ótimo! Então vamos começar uma aventura. Forneça um nome abaixo e escolha que tipo de aventura você gostaria
                    de viver com seus amigos (ou inimigos). O tamanho afeta a forma como os pontos serão fornecidos e como novos
                    elementos serão adicionados às opções.
                    <p>
                    Em seguida, escolha os amigos que deseja convidar, selecionando seus nomes para os personagens ao lado. Mas
                    não se esqueça, um dos personagens deverá ser você.
                    <p>
                    Uma vez cadastrada, sua história será criada em turnos. Cada amigo deverá adicionar novos contos, utilizando
                    as frases, cenários, itens e personagens fornecidos. Eventualmente os jogadores com mais pontos terão a 
                    chance de eliminar os outros jogadores. O vencedor será o último sobrevivende.
				</td>
				<td valign="top" align="center" rowspan="3">
					<input type="hidden" id="heroIdPlayer" />
                    <div id="heroList">
						<ul>
						</ul>
					</div>
					<input type='hidden' id='facebookID'/>
					<input type='text' id='facebookName' style='width:80%'/>
					<button id="btnAdd">Adicionar</button>
				</td>
			</tr>
            <tr>
                <td><div class="fbgreybox">Detalhes da Aventura</div></td>
            </tr>
			<tr>
				<td valign="top">
                    <table border="0" cellpadding="0" cellspacing="0">
                        <tr>
                            <td width="30%" align="center"><h2>Título</h2></td>
                            <td><input type="text" id="title" style="width: 90%" /></td>
                        </tr>
                        <tr>
                            <td align="center"><h2>Duração</h2></td>
                            <td>
                                <table border="0" cellpading="0" cellspacing="0">
                                    <tr>
                                        <td><input type="radio" name="size" value="L"/>
                                        <td>
                                            <div style="width: 90%">
                                                <b>Épica</b>. Um conto para os fortes! Um dia canções serão feitas, 
                                                mencionando os bravos heróis envolvidos (claro, com risos ao fundo).
                                                Apenas os mais corajosos aventureiros serão capazes de enfrentar os
                                                desafios, mas as recompensas também serão à altura.
                                            </div>
                                            <p/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input type="radio" name="size" value="M"/>
                                        <td>
                                            <div style="width: 90%">
                                                <b>Regular</b>. Um clássico conto de magia, espadas e escudos. Mas
                                                Não se iluda! O perigo espreita em cada encruzilhada. Seus atos, ou
                                                ao menos suas bebedeiras serão lembradas! Não em cantigas de festivais
                                                ou banquetes reais, mas ao menos pelo taberneiro local.
                                            </div>
                                            <p/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input type="radio" name="size" value="S"/>
                                        <td>
                                            <div style="width: 90%">
                                                <b>Modesta</b>. Uma pequena aventura, apenas para ganhar algumas
                                                moedas e talvez combater alguns goblins menores ou batedores. Mas
                                                mesmo assim, é uma aventura maior do que aqueles que ficam apenas
                                                em suas casas, olhando velas derretendo.
                                            </div>
                                            <p/>
                                        </td>
                                    </tr>                                        
                                </table>
                            </td>
                        </tr>
                    </table>
				</td>
			</tr>            
			<tr>
				<td colspan="2" align="center" valign="bottom">
					<hr/>
					<a href="#" class="mainButton">Cancelar</a>
                    <a href="#" class="mainButton">Iniciar</a>
				</td>
			</tr>
		</table>
		<script type="text/javascript" language="javascript" src="/js/lib/jquery-1.9.1.min.js"></script>
		<script type="text/javascript" language="javascript" src="/js/lib/jquery.jcarousel.js"></script>
        <script type="text/javascript" language="javascript" src="/js/lib/jquery-ui-1.10.3.custom.js"></script>
		<script type="text/javascript" language="javascript">
		function setHeroIdPlayer(carousel, state){
			$('#heroIdPlayer').val($('#heroId-'+carousel.first).val());
		}
		jQuery(document).ready(function() {
            jQuery.easing['BounceEaseOut'] = function(p, t, b, c, d) {
                if ((t/=d) < (1/2.75)) {
                    return c*(7.5625*t*t) + b;
                } else if (t < (2/2.75)) {
                    return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;
                } else if (t < (2.5/2.75)) {
                    return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;
                } else {
                    return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;
                }
            };
            function mycarousel_initCallback(carousel, state) {
                carousel.lock();
				$.getJSON('https://deviria-tests.aws.af.cm/api/heroes', function(data) {
					if (data.length > 0) {
						for (i=0; i<data.length; i++) {
							var html = '<li>'
							         + '<div style="width: 100%; height: 130px;">'
									 + '<input type="hidden" id="heroId-' + (i + 1) + '" value="' + data[i]._id + '" />'
							         + '<table border="0" cellpadding="1" cellspacing="0">'
							         + '<tr>'
							         + '<td width="150" rowspan="2" align="center" valign="middle"><img src="https://deviria-tests.aws.af.cm/images/heroes/' + data[i].imageURL + '" width="100"/></td>'
							         + '<td><font style="font-family: tahoma,verdana,arial,sans-serif; font-size: 16px; color: #333333; ">' + data[i].name + '</h3></td>'
							         + '</tr>'
							         + '<tr><td><font style="font-family: tahoma,verdana,arial,sans-serif; font-size: 11px; color: #333333; ">' + data[i].description + '</font></td></tr>'
							         + '</table>'
							         + '</div>'
							         + '</li>';
							carousel.add(i + 1, html);
						}
					}
					carousel.size(data.length);
					carousel.unlock();
					carousel.setup();
				});
            };
            jQuery('#heroList').jcarousel({
                vertical: true,
                scroll: 1,
                size: 0,
                easing: 'BounceEaseOut',
                animation: 1000,
                itemFallbackDimension: 130,
                initCallback: mycarousel_initCallback,
				itemLoadCallback: setHeroIdPlayer
            });
			jQuery('#btnAdd').button({
				icons: {
					primary: "ui-icon-gear",
				}
			}).click(function(){
					$('#cadAdventure').click(function(){
		var players = new Array();
		var adventure = new Object();
		$('.columnHero').each(function(){
			var player = new Object();
			player.facebookInfo = new Object();
			player.facebookInfo.userID = $(this).children("#facebookID").val();
			player.facebookInfo.displayName = $(this).children("#facebookName").val();
			player.assignedHeroID = $(this).children('#heroIdPlayer').val();			
			});
        });		

		/*
		var fbID = "facebookInfo_userID_" + i;
		var fbName = "facebookInfo_displayName_" + i;   
		$("#" + fbName).autocomplete({
			minLength: 2,
			source: 'http://localhost:3000/api/facebook/friends',
			focus: function(event, ui) {
				console.log("onFocus");
				$("#project").val(ui.item.name);
			},
			select: function(event, ui) {
				console.log("onSelect");
				$("#" + fbName).val(ui.item.name);
				$("#" + fbID).val(ui.item.id);
			},
			create: function(event, ui) {
				console.log("onCreate");
			}
		});
		*/
		</script>
	</body>
</html>